<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Satoshi:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,1,0&display=swap" />
    <title>Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
</head>
<body class="bg-[#161616]">
    <div class="flex flex-row md:flex-row">
            {% include 'sidebar.html' %}
        <div class="flex-grow p-6 w-full ">
            <div class="text-[#f2f2f2] font-bold text-2xl">
                <h1>Nosos Tracking Dashboard</h1>
            </div>

            <!-- WEATHER INFORMATION AND PIE CHART -->
            <div class="flex flex-row md:flex-row gap-6 mt-2">
                <!-- Weather Information Box -->
                <div class= "flex flex-col bg-[#252525] w-full md:w-1/6 rounded-2xl text-[#f2f2f2] px-3 py-3">
                    
                    <div class="flex flex-col justify-between items-start px-1">
                        <img src="{{ url_for('static', filename='images/Weather.png') }}" class="bg-[#252525] w-20 h-20 object-contain" alt="Weather">
                        <div class="text-center mb-4">
                            <h2 class="font-normal text-lg md:text-4xl">28Â°</h2>
                            <h5 class="font-light text-sm">Temperature</h5>
                        </div>
                        <div class="text-center md:text-left mb-6">
                            <h2 class="font-bold text-lg md:text-2xl">Philippines</h2>
                            <h5 class="font-normal text-sm md:text-base">Davao City</h5>
                        </div>
                        <h2 class="font-bold text-sm md:text-base">20 November, 2024</h2>
                    <h5 class="font-light text-xs md:text-sm">Wednesday</h5>
                    </div>
                </div>
                <!-- Disease Information Pie Chart -->
                <div class="w-full md:w-2/5 mt-4 md:mt-0 flex flex-col items-center">
                    <div class="w-full mt-4 md:mt-0 flex flex-col items-start bg-[#252525] h-auto rounded-2xl text-[#f2f2f2] px-6 py-2">
                        <h2 class="font-semibold ">Climatic Factors by Historical Data of Diseases</h2>
                        <div class="relative inline-block mt-2">
                            <!-- Dropdown Button -->
                            <span id="dropdownButton" class="material-symbols-outlined bg-[#3E3E3E] text-[#f2f2f2] rounded-xl gap-4 px-5 py-1 cursor-pointer flex items-center justify-between">
                                <span id="dropdownSelectedValue" class="text-sm font-sans font-medium mb-0.5">Dengue</span>
                                <span class="material-symbols-outlined">arrow_drop_down</span>
                            </span>
                        
                            <!-- Dropdown Menu -->
                            <div id="dropdownMenu" class="absolute bg-[#3E3E3E] text-[#f2f2f2] rounded-lg mt-2 p-2 hidden z-10">
                                <div class="cursor-pointer p-2 hover:bg-[#555]" data-value="DENGUE FEVER">Dengue</div>
                                <div class="cursor-pointer p-2 hover:bg-[#555]" data-value="ACUTE BLOODY DIARRHEA">AB Diarrhea</div>
                                <div class="cursor-pointer p-2 hover:bg-[#555]" data-value="TYPHOID FEVER">Typhoid</div>
                                <div class="cursor-pointer p-2 hover:bg-[#555]" data-value="LEPTOSPIROSIS">Leptospirosis</div>
                            </div>
                        </div>
                        
                        <div class="flex flex-row-reverse justify-between items-center w-full gap-4">
                            <canvas id="pieChart" class="size-56 mr-20 mb-6"></canvas>
                            <div class="flex flex-col gap-3 text-[#f2f2f2] font-medium text-xs">
                                <div class="flex items-center gap-2">
                                    <span class="w-2 h-4 bg-[#1C497C] inline-block rounded-full"></span>
                                    <span>Average Temperature</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <span class="w-2 h-4 bg-[#C85890] inline-block rounded-full"></span>
                                    <span>Min Temperature</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <span class="w-2 h-4 bg-[#09A4A6] inline-block rounded-full"></span>
                                    <span>Max Temperature</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <span class="w-2 h-4 bg-[#C83D09] inline-block rounded-full"></span>
                                    <span>Heat Index</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <span class="w-2 h-4 bg-[#0998C8] inline-block rounded-full"></span>
                                    <span>Precipitation</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <span class="w-2 h-4 bg-[#C88509] inline-block rounded-full"></span>
                                    <span>Wind Speed</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <span class="w-2 h-4 bg-[#3b5998] inline-block rounded-full"></span>
                                    <span>Humidity</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <span class="w-2 h-4 bg-[#004c4c] inline-block rounded-full"></span>
                                    <span>Solar Radiation</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <span class="w-2 h-4 bg-[#D90368] inline-block rounded-full"></span>
                                    <span>UV Radiation</span>
                                </div>
                            </div>
                        </div>
                    </div>                 
                </div>
                <div class="w-full md:w-2/5 relative -mt-8">
                    <div class="bg-[#252525] w-full h-auto rounded-2xl text-[#f2f2f2] px-6 py-4 relative">
                        <div class="flex flex-col relative">
                            <h2 class="font-semibold">Predicted Cases by Disease</h2>
                            <h2 class="absolute right-1 -top-1 text-lg">Week 1</h2>
                            <canvas id="barChart" class="w-full h-60 mt-4"></canvas>
                        </div>
                    </div>
                </div>
                
            </div>

            <!-- DISEASE INFORMATION -->
            <div class="flex flex-row gap-6">
                <div class="bg-[#252525] w-full md:w-7/12 rounded-2xl text-[#f2f2f2] px-3 py-6 mt-5">
                    <div class="flex flex-wrap gap-4">
                        <!-- Disease Risk Level Section -->
                        <div class="rounded-lg w-full md:w-1/2 flex-1 text-center p-4 lg:h-auto relative bg-gradient-to-bl from-[rgba(255,102,102,0.3)] from-0% to-[rgba(62,62,62,0.3)] to-65%">
                            <span class="material-symbols-outlined bg-[#252525] rounded-full text-lg size-8 absolute top-2 left-2">warning</span>
                            <div class="mt-10">
                                <h2 class="font-semibold text-base lg:text-lg">Disease Risk Level</h2>
                                <ol class="flex flex-row items-end justify-center gap-6 mt-12 lg:mt-20">
                                    <li class="flex flex-col items-center"><span class="bg-[#28A745] w-4 h-10 lg:h-20 rounded-lg mb-2 opacity-75"></span><h5 class="text-xs font-semibold">Low</h5></li>
                                    <li class="flex flex-col items-center"><span class="bg-[#FFC107] w-4 h-14 lg:h-28 rounded-lg mb-2 opacity-75"></span><h5 class="text-xs font-semibold">Medium</h5></li>
                                    <li class="flex flex-col items-center"><span class="bg-[#FD7E14] w-4 h-20 lg:h-36 rounded-lg mb-2 opacity-75"></span><h5 class="text-xs font-semibold">High</h5></li>
                                    <li class="flex flex-col items-center"><span class="bg-[#DC3545] w-4 h-28 lg:h-44 rounded-lg mb-2 opacity-75"></span><h5 class="text-xs font-semibold">Severe</h5></li>
                                </ol>
                            </div>
                        </div>
    
                        <!-- Total Number of Predicted Cases -->
                        <div class="rounded-lg w-full md:w-1/2 h-auto flex-1 text-center p-4 relative bg-gradient-to-bl from-[rgba(102,102,255,0.3)] from-0% to-[rgba(62,62,62,0.3)] to-65%">
                            <span class="material-symbols-outlined bg-[#252525] rounded-full text-lg size-8 absolute top-2 left-2 p-0.5">trending_up</span>
                            <div class="mt-10">
                                <h2 class="font-semibold text-sm lg:text-lg">Total Number of Predicted Cases for Each City</h2>
                                <h2 class="mt-10 text-6xl font-thin">8764</h2>
                                <h5 class="text-xs mt-14 lg:text-base">Predicted <span class="font-bold">Dengue</span> cases in <span class="font-bold">Davao City</span></h5>
                            </div>
                        </div>
    
    
                        <!-- Monitored Diseases -->
                        <div class="rounded-lg w-full md:w-1/2 h-auto flex-1 text-center p-4 relative bg-gradient-to-bl from-[rgba(102,178,102,0.3)] from-0% to-[rgba(62,62,62,0.3)] to-65%">
                            <span class="material-symbols-outlined bg-[#252525] rounded-full text-lg size-8 absolute top-2 left-2 p-0.5">coronavirus</span>
                            <div class="mt-10 flex flex-col">
                                <h2 class="font-semibold text-sm md:text-base lg:text-lg ">Monitored Diseases</h2>
                                <div class="ml-12 lg:ml-8">
                                    <div class="flex items-center gap-4 mt-4 lg:mt-12">
                                        <img src="{{ url_for('static', filename='images/mosquito.png') }}" class="bg-[#ebe5e5] rounded-full w-9 h-9 p-1 object-contain" alt="Mosquito">
                                        <h2 class="text-sm font-normal lg:text-lg">Dengue</h2>
                                    </div>
                                    <div class="flex items-center gap-4 mt-4">
                                        <img src="{{ url_for('static', filename='images/typhoid.png') }}" class="bg-[#ebe5e5] rounded-full w-9 h-9 p-1 object-contain" alt="Mosquito">
                                        <h2 class="text-sm font-normal lg:text-lg">Typhoid Fever</h2>
                                    </div>
                                    <div class="flex items-center gap-4 mt-4">
                                        <img src="{{ url_for('static', filename='images/mouse.png') }}" class="bg-[#ebe5e5] rounded-full w-9 h-9 p-1 object-contain" alt="Mosquito">
                                        <h2 class="text-sm font-normal lg:text-lg">Leptospirosis</h2>
                                    </div>
                                    <div class="flex items-center gap-4 mt-4">
                                        <img src="{{ url_for('static', filename='images/abd.png') }}" class="bg-[#ebe5e5] rounded-full w-9 h-9 p-1 object-contain" alt="Mosquito">
                                        <h2 class="text-sm font-normal lg:text-lg">AB Diarrhea</h2>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Historical Disease Risk Section -->
                <div class="bg-[#252525] h-auto w-full md:w-2/5 relative rounded-2xl text-[#f2f2f2] -mt-3">
                    <div class="flex flex-col">
                        <h2 class="font-semibold text-lg mb-2 py-5 px-5">Historical Disease Risk of Each City</h2>
                        <button class="absolute right-2 top-2 text-lg bg-[#3E3E3E] p-2 rounded-full size-10 flex items-center">
                            <span class="material-symbols-outlined ">
                                search
                                </span>
                        </button>
                        <!-- Scrollable Table Container -->
                        <div class="overflow-y-scroll max-h-96 rounded-b-2xl custom-scrollbar">
                            <table class="w-full border-separate border-spacing-y-0.5 bg-[#3A3A3A] rounded-b-2xl">
                                <thead>
                                    <tr class="text-left text-xs">
                                        <th class="w-1/12 py-3 px-12 font-extralight bg-[#3A3A3A]">No.</th>
                                        <th class="w-3/12 px-3 font-extralight bg-[#3A3A3A]">City</th>
                                        <th class="w-4/12 px-10 font-extralight bg-[#3A3A3A]">Disease</th>
                                        <th class="w-4/12 px-6 font-extralight bg-[#3A3A3A]">Risk Level</th>
                                    </tr>
                                </thead>
                                <tbody class="text-sm font-medium rounded-full">
                                    {% for row in disease_data %}
                                    <tr class="{{ 'bg-[#4c4c4c]' if loop.index is odd else 'bg-[#3A3A3A]' }} rounded-lg">
                                        <td class="py-4 px-12">{{ loop.index }}</td>
                                        <td class="py-2 px-3">{{ row['City'] }}</td>
                                        <td class="py-2 px-10">{{ row['Disease'] }}</td>
                                        <td class="py-2 px-6 {{ 
                                            'text-[#28A745]' if row['Risk_Level'] == 'Low' else
                                            'text-[#FFC107]' if row['Risk_Level'] == 'Medium' else
                                            'text-[#FD7E14]' if row['Risk_Level'] == 'High' else
                                            'text-[#DC3545]' if row['Risk_Level'] == 'Severe' else ''
                                        }}">
                                            {{ row['Risk_Level'] }}
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                            
                        </div>
                    </div>
                </div>
                
                
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
    <script>
        const climateImpactData = {{ climate_impact|safe }}
    </script>
    
</body>
</html>
